<div class="container">
    <table class="table">
        <tbody >
            <tr >
                <td class="text-center"> <label  for="inputName" >Espece:  </label></td>
                <td><select style="width: 200px;" name="type" class="form-control" ng-model="espece_id" required="true" ng-change="besoinAlimentaire()">
                        <option ng-repeat="espece in especes" ng-value="espece.id" >{{espece.nom}}</option>
                    </select>
                </td>
                <td class="text-center"> <label  for="inputName" >Ration:  </label></td>
                <td><select style="width: 200px;" name="type" class="form-control" ng-model="besoin_id" required="true" ng-change="ration()">
                        <option ng-repeat="b in listeBesoin" ng-value="b.id">{{b.nom}}</option>
                    </select>
                </td>
            </tr>
        </tbody>
    </table>
    <div class="row">
        
        <div class="col-sm-2">
            <div class="panel panel-default panel-table">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col col-xs-6">
                            <h3 class="panel-title">INGREDIENTS</h3>
                        </div>
                    </div>
                </div>
                <div class="panel-body ">
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered">
                            <tbody >
                            <tr ng-repeat="engr in engredients">
                                <td>{{engr.nom}}</td>
                                <td><input type="checkbox" ng-checked="selection.indexOf(engr) > -1" 
                                           ng-click="toggleSelection(engr)"></td>
                            </tr>
                        </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-sm-10">
            <div class="panel panel-default panel-table">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col col-xs-6">
                            <h3 class="panel-title">ALIMENTATION</h3>
                        </div>
                    </div>
                </div>
                <div class="panel-body ">
                    <div class="">
                        <table class="table table-striped table-bordered">
                            <tr>
                                <th>Ingredients</th>
                                <th>(%)</th>
                                <th ng-repeat=" item in valeurs" class="text-center" >
                                    {{item.code}}
                                </th>
                            </tr>
                            <tbody >
                                <tr ng-repeat=" item in selection" class="text-center">
                                    <td>{{item.nom}} </td>
                                    <td><input style="max-width: 45px" type="number" ng-model="percent[selection.indexOf(item)]" ng-change="Total()" step="0.01"/></td>
                                    <!-- <td ng-repeat=" items in valeurs"  ><input style="max-width: 45px" type="number" id="inputName" ng-model="this.val" ng-change="Bilan(valeurs.indexOf(items), selection.indexOf(item))"/></td> -->
                                    <td style="max-width: 100px;"  ng-repeat=" items in bilan[selection.indexOf(item)] track by $index" > {{items.val| number:2}} </td>
                                </tr>
                                <tr class="text-center">
                                    <td>Total </td>
                                    <td>{{total}}</td>
                                    <td ng-repeat=" item in valeurs"> {{item.val| number:2}}</td>
                                </tr>
                                <tr class="text-center">
                                    <td> </td>
                                    <td></td>
                                    <td ng-repeat=" item in valeurs"> {{item.ratio| number:2}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
